{% load static %}
 <link rel="stylesheet" href="{% static 'css/style.css' %}">
<title>Bulk Upload</title>

<div style="position: absolute; top: 10px; left: 10px;">
    <img src="{% static 'images/Zippee_logo.jpg_140619.jpg' %}" alt="Logo" style="height: 70px;">
</div>

<h1 style="margin-top: 50px;">Bulk Upload PODs</h1>

<form method="POST" enctype="multipart/form-data" id="bulkForm">
    {% csrf_token %}

    <label>Upload PODs:</label>
    <input type="file" id="podInput" name="images" multiple required>

    <div id="imageOrderContainer"></div>

    <button style="margin-top: 20px;" type="submit">Upload</button>
</form>

<script>
document.getElementById("podInput").addEventListener("change", function (e) {
    let container = document.getElementById("imageOrderContainer");
    container.innerHTML = "";  // Clear old previews

    [...e.target.files].forEach((file, index) => {
    let block = document.createElement("div");
        block.style = `
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ccc;
        border-radius: 10px;
        display: flex;
        gap: 20px;
        align-items: center;
        `;

        // Create file reader for preview
        let reader = new FileReader();
        reader.onload = function (event) {
            block.innerHTML = `
                <div>
                    <img src="${event.target.result}"
                         style="width: 120px; height: auto; border-radius: 6px; border: 1px solid #ddd;">
                </div>

                <div style="flex-grow: 1;">
                    <p><strong>${index + 1}. ${file.name}</strong></p>

                    <label>Enter Order IDs (comma separated):</label>
                    <input type="text" 
                           name="order_ids_for_image_${index}"
                           placeholder="Order_ID1, Order_ID2, Order_ID3, ...."
                           style="width: 100%; padding: 8px; margin-top: 6px; border-radius: 6px; border: 1px solid #aaa;"
                           required>
                </div>
            `;
        };

        reader.readAsDataURL(file); // Preview file
        container.appendChild(block);
    });
});
</script>

